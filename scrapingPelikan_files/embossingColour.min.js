(function(){'use strict';if(!window.Meanbee){window.Meanbee={};}
var JournalEmbossingColour={initialize:function(targetElement,selectedSwatchClassName,dataAttribute,mainImageSelector,colourSwatchSelector,embossingStyleBlindElements){this.mainImageSelector=mainImageSelector;this.targetElement=targetElement;this.selectedSwatchClassName=selectedSwatchClassName;this.dataAttribute=dataAttribute;this.originalColor=null;this.colourSwatchSelector=colourSwatchSelector;this.embossingStyleBlindElements=embossingStyleBlindElements;var colourSwatches=jQuery(this.colourSwatchSelector);},calcTextColor:function(color){return tinycolor(color).darken().toString();},calcInnerShadowColor:function(color){return tinycolor(color).darken(30).toString();},calcOuterShadowColor:function(color){return tinycolor(color).lighten().toString();},computeFontColour:function(){var originalColorElement=(jQuery(this.selectedSwatchClassName+'.selected').length>0?jQuery(this.selectedSwatchClassName+'.selected').first():jQuery(this.selectedSwatchClassName).first());if(!originalColorElement.length){originalColorElement=jQuery('.engraving-button').first();}
if(ColorThief){var componentToHex=function(c){var hex=c.toString(16);return hex.length==1?"0"+hex:hex;}
try{var colourThief=new ColorThief();var mainImage=jQuery(this.mainImageSelector)[0];var dominantColour=colourThief.getColor(mainImage);if(dominantColour){var r=dominantColour[0],g=dominantColour[1],b=dominantColour[2];originalColorElement.attr(this.dataAttribute,"#"+componentToHex(r)+componentToHex(g)+componentToHex(b));}}catch(e){}}},applyStyle:function(){this.computeFontColour();var originalColorElement=(jQuery(this.selectedSwatchClassName+'.selected').length>0?jQuery(this.selectedSwatchClassName+'.selected').first():jQuery(this.selectedSwatchClassName).first());if(!originalColorElement.length){originalColorElement=jQuery('.engraving-button').first();}
this.originalColor=originalColorElement.attr(this.dataAttribute);if(!this.originalColor){this.originalColor=originalColorElement.children().first().css('background-color');}
var color=this.calcTextColor(this.originalColor),outerShadow=this.calcOuterShadowColor(this.originalColor),innerShadow=this.calcInnerShadowColor(this.originalColor);jQuery(this.targetElement).find('p').css({'textShadow':'0 2px 3px '+outerShadow+', 0 -1px 0 '+innerShadow,'color':color});}};window.Meanbee.JournalEmbossingColour=JournalEmbossingColour;})();