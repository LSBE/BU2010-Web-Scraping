define(['jquery'],function($){'use strict';$.widget('penheaven.calculateStyles',{options:{bannerBlockSelector:'.bannerBlock',bannerBlockRightSelector:'.banner-block-right',bestSellerItemSelector:'.block-bestseller-products .product-item',blockCategorySelector:'.block-content.catalog-category .equalize',brandPostSelector:'.brand-post-static-content .bluefoot-column-4',carouselContainerSelector:'.carouselContainer .equalize',firstBannerWrapperSelector:'.banner-block-wrapper.first .equalize',loginContainerSelector:'.login-container .equalize',navigationSubmenuWrapperSelector:'navigation .submenu .promotion-wrapper',postListItemSelector:'.post-list > .item',productItemSelector:'.product-items .product-item.js-same-height',rangeItemSelector:'.ranges-block .range-item',recommendedItemSelector:'.recommended-products .product-item',reviewItemSelector:'.review-items .review-item',swatchClassWildcard:'[class*="swatch"]'},_create:function(){var self=this,wWidth=window.outerWidth;this.equalizeHeights(this.options.loginContainerSelector,'desktop');this.equalizeHeights(this.options.carouselContainerSelector,'desktop');this.equalizeHeights(this.options.firstBannerWrapperSelector,'desktop');this.equalizeHeights(this.options.blockCategorySelector,'desktop');this.equalizeHeights(this.options.recommendedItemSelector);this.equalizeHeights(this.options.postListItemSelector,'desktop');this.equalizeHeights(this.options.brandPostSelector,'desktop');this.equalizeHeights(this.options.navigationSubmenuWrapperSelector,'desktop');$(window).on('load resize',function(){window._.debounce(self.setHeights(),1000);});this.swatchesObserver();setTimeout(function(){self.equalizeHeights(self.options.reviewItemSelector);},7000);},setHeights:function(){var wWidth=window.outerWidth;this.equalizeHeights(this.options.firstBannerWrapperSelector,'desktop');this.equalizeHeights(this.options.blockCategorySelector,'desktop-mobile');this.equalizeHeights(this.options.bestSellerItemSelector);this.equalizeHeights(this.options.reviewItemSelector);var homepageBlockBgImage=$(this.options.bannerBlockRightSelector);if(homepageBlockBgImage.length>0){var homepageBlockBgImageHeight=homepageBlockBgImage.outerHeight();var childBlocks=homepageBlockBgImage.find(this.options.bannerBlockSelector);var blockHeight=(homepageBlockBgImageHeight / 2)-2;$.each(childBlocks,function(i,item){$(item).css('height',blockHeight);});}},swatchesObserver:function(){var self=this,swatches=$('[class*="swatch-opt"]:visible'),targetNode=swatches[swatches.length-1],config={childList:true,subtree:true},observer;var callback=function(mutationsList,observer){for(var mutation of mutationsList){if(mutation.type==='childList'){if($(mutation.target).is(self.options.swatchClassWildcard)){if((!$(".catalog-category-view").length&&!$(".catalogsearch-result-index").length)){self.equalizeHeights(self.options.productItemSelector);}
observer.disconnect();}}}};if(swatches.length&&targetNode){observer=new MutationObserver(callback);observer.observe(targetNode,config);}},equalizeHeights:function(selector,screen){var wWidth=window.outerWidth,heights=[],max=0;if(screen=='desktop'&&wWidth<768){return;}
$(selector).each(function(){if($(".js-brand-contents.content-all").length&&!$(".js-brand-contents.content-all").is(":visible")){return;}
$(this).css('height','0');$(this).css('max-height','none');$(this).css('height','auto');heights.push($(this).outerHeight());});max=Math.max.apply(Math,heights);$(selector).each(function(i){$(this).css('height',max+'px');});}});return $.penheaven.calculateStyles;});