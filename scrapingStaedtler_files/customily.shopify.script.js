!function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["customily.shopify.script"]=e():t["customily.shopify.script"]=e()}(window,(function(){return function(t){function e(e){for(var n,i,r=e[0],s=e[1],l=0,a=[];l<r.length;l++)i=r[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&a.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);for(c&&c(e);a.length;)a.shift()()}var n={},o={1:0};function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,i){n=o[t]=[e,i]}));e.push(n[2]=r);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=function(t){return i.p+"customily.shopify.script."+({0:"cart",2:"main"}[t]||t)+".e04f84cad86bc0d3bee2.js"}(t);var c=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(a);var n=o[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",c.name="ChunkLoadError",c.type=i,c.request=r,n[1](c)}o[t]=void 0}};var a=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var r=window.customily_options_shopify_jsonpFunction_NDqTZNBHtTHSskPs8SJS=window.customily_options_shopify_jsonpFunction_NDqTZNBHtTHSskPs8SJS||[],s=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var c=s;return i(i.s="./src/index.ts")}({"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/assets/css/loader-indicator/loading.scss":function(t,e,n){(e=n("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([t.i,".ld-over-inverse.running{pointer-events:none !important}.ld-ring{width:1em !important;height:1em !important;position:relative !important;color:inherit !important;display:inline-block !important;box-sizing:content-box !important}.ld-ring:after{content:' ' !important;display:block !important;width:2em !important;height:2em !important;box-sizing:border-box !important;transform-origin:0em 0em !important;transform:translateZ(0) scale(0.5) !important;backface-visibility:hidden !important}.ld-ring:after{border-radius:50% !important;border:0.3em solid currentColor !important;border-left-color:transparent !important}.ld-loader{background-size:cover !important}.ld{transform-origin:50% 50% !important;transform-box:fill-box !important}@keyframes ld-cycle{0%{animation-timing-function:cubic-bezier(0.3333, 0.3333, 0.6667, 0.6667);transform:rotate(0deg)}100%{transform:rotate(360deg)}}.ld.ld-cycle{animation:ld-cycle 1s infinite linear !important}\n",""]),t.exports=e},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/assets/css/loader-indicator/spinner.scss":function(t,e,n){(e=n("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([t.i,".ld-ext-right,.ld-ext-left,.ld-ext-bottom,.ld-ext-top,.ld-over,.ld-over-inverse,.ld-over-full,.ld-over-full-inverse{position:relative !important;transition:all 0.3s !important;transition-timing-function:ease-in !important}.ld-ext-right>.ld,.ld-ext-left>.ld,.ld-ext-bottom>.ld,.ld-ext-top>.ld,.ld-over>.ld,.ld-over-inverse>.ld,.ld-over-full>.ld,.ld-over-full-inverse>.ld{position:absolute !important;top:50% !important;left:50% !important;width:1em !important;height:1em !important;margin:-0.5em !important;opacity:0 !important;z-index:-1 !important;transition:all 0.3s !important;transition-timing-function:ease-in !important}.ld-ext-right>.ld>*,.ld-ext-left>.ld>*,.ld-ext-bottom>.ld>*,.ld-ext-top>.ld>*,.ld-over>.ld>*,.ld-over-inverse>.ld>*,.ld-over-full>.ld>*,.ld-over-full-inverse>.ld>*{width:1em !important;height:1em !important;position:absolute !important;top:50% !important;left:50% !important;transform:translate(-0.5em, -0.5em) !important}.ld-ext-right.running>.ld,.ld-ext-left.running>.ld,.ld-ext-bottom.running>.ld,.ld-ext-top.running>.ld,.ld-over.running>.ld,.ld-over-inverse.running>.ld,.ld-over-full.running>.ld,.ld-over-full-inverse.running>.ld{opacity:1 !important;z-index:auto !important;visibility:visible !important;background:rgba(0,0,0,0.6) !important}.ld-ext-right.running{padding-right:2.5em !important}.ld-ext-right>.ld{top:50% !important;left:auto !important;right:1.25em !important}.ld-ext-left.running{padding-left:2.5em !important}.ld-ext-left>.ld{top:50% !important;right:auto !important;left:1.25em !important}.ld-ext-bottom.running{padding-bottom:2.5em !important}.ld-ext-bottom>.ld{top:auto !important;left:50% !important;bottom:1.25em !important}.ld-ext-top.running{padding-top:2.5em !important}.ld-ext-top>.ld{bottom:auto !important;left:50% !important;top:1.25em !important}.ld-over:before,.ld-over-inverse:before,.ld-over-full:before,.ld-over-full-inverse:before{content:' ' !important;display:block !important;position:absolute !important;z-index:-1 !important;top:0 !important;left:0 !important;width:100% !important;height:100% !important;transition:all 0.3s !important;transition-timing-function:ease-in !important;border-radius:inherit !important}.ld-over.running>.ld,.ld-over-inverse.running>.ld,.ld-over-full.running>.ld,.ld-over-full-inverse.running>.ld{z-index:4001 !important;background-color:transparent !important}.ld-over-inverse.running:before,.ld-over-full.running:before,.ld-over-full-inverse.running:before{opacity:1 !important;z-index:4000 !important;display:block !important;background:rgba(0,0,0,0.6) !important}.ld-over.running:before{background:rgba(240,240,240,0.8) !important}.ld-over-full.running>.ld,.ld-over-full-inverse.running>.ld,.ld-over-full.running:before,.ld-over-full-inverse.running:before{position:fixed !important}.ld-over-full>.ld{color:rgba(0,0,0,0.8) !important}.ld-over-inverse>.ld{color:rgba(255,255,255,0.8) !important}.ld-over-full-inverse>.ld{color:rgba(255,255,255,0.8) !important}\n",""]),t.exports=e},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/assets/css/tiny-essentials.scss":function(t,e,n){(e=n("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([t.i,".hidden-cart-btn,.customily-modal-hidden,.hidden-buy-now-btn{display:none !important}\n",""]),t.exports=e},"./node_modules/css-loader/dist/runtime/api.js":function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"===typeof btoa){var i=function(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(n," */")}(o),r=o.sources.map((function(t){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(t," */")}));return[n].concat(r).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,o){"string"===typeof t&&(t=[[null,t,""]]);var i={};if(o)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(i[s]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);o&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},"./node_modules/current-executing-script/dist/currentExecutingScript.js":function(t,e,n){var o,i,r;this||window,i=[],void 0===(r="function"===typeof(o=function(){var t=/^(interactive|loaded|complete)$/,e=window.location?window.location.href:null,n=e&&e.replace(/#.*$/,"").replace(/\?.*$/,"")||null,o=document.getElementsByTagName("script"),i="readyState"in(o[0]||document.createElement("script")),r=!window.opera||"[object Opera]"!==window.opera.toString(),s="currentScript"in document;"stackTraceLimit"in Error&&Error.stackTraceLimit!==1/0&&(Error.stackTraceLimit,Error.stackTraceLimit=1/0);var l=!1,c=!1;function a(){if(0===o.length)return null;var e,d,u,f,p,m=[],v=a.skipStackDepth||1;for(e=0;e<o.length;e++)r&&i?t.test(o[e].readyState)&&m.push(o[e]):m.push(o[e]);if(d=new Error,l&&(u=d.stack),!u&&c)try{throw d}catch(b){u=b.stack}if(u&&!(p=function(t,e){var n,i=null;if(e=e||o,"string"===typeof t&&t)for(n=e.length;n--;)if(e[n].src===t){i=e[n];break}return i}(f=function t(e,n){var o,i=null,r="number"===typeof n;return n=r?Math.round(n):0,"string"===typeof e&&e&&(r?o=e.match(/(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/):(o=e.match(/^(?:|[^:@]*@|.+\)@(?=data:text\/javascript|blob|http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&o[1]||(o=e.match(/\)@(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/)),o&&o[1]&&(i=n>0?t(e.slice(e.indexOf(o[0])+o[0].length),n-1):o[1])),i}(u,v),m))&&n&&f===n&&(p=function(t){var e,n,i=null;for(e=0,n=(t=t||o).length;e<n;e++)if(!t[e].hasAttribute("src")){if(i){i=null;break}i=t[e]}return i}(m)),p||1===m.length&&(p=m[0]),p||s&&(p=document.currentScript),!p&&r&&i)for(e=m.length;e--;)if("interactive"===m[e].readyState){p=m[e];break}return p||(p=m[m.length-1]||null),p}(function(){try{var t=new Error;throw l="string"===typeof t.stack&&!!t.stack,t}catch(e){c="string"===typeof e.stack&&!!e.stack}})(),a.skipStackDepth=1;var d=a;return d.near=a,d.far=function(){return null},d.origin=function(){return null},d})?o.apply(e,i):o)||(t.exports=r)},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":function(t,e,n){"use strict";var o=function(){var t;return function(){return"undefined"===typeof t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t}}(),i=function(){var t={};return function(e){if("undefined"===typeof t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(o){n=null}t[e]=n}return t[e]}}(),r=[];function s(t){for(var e=-1,n=0;n<r.length;n++)if(r[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},o=[],i=0;i<t.length;i++){var l=t[i],c=e.base?l[0]+e.base:l[0],a=n[c]||0,d="".concat(c," ").concat(a);n[c]=a+1;var u=s(d),f={css:l[1],media:l[2],sourceMap:l[3]};-1!==u?(r[u].references++,r[u].updater(f)):r.push({identifier:d,updater:m(f,e),references:1}),o.push(d)}return o}function c(t){var e=document.createElement("style"),o=t.attributes||{};if("undefined"===typeof o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(t){e.setAttribute(t,o[t])})),"function"===typeof t.insert)t.insert(e);else{var s=i(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var a=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function d(t,e,n,o){var i=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(t.styleSheet)t.styleSheet.cssText=a(e,i);else{var r=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function u(t,e,n){var o=n.css,i=n.media,r=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),r&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var f=null,p=0;function m(t,e){var n,o,i;if(e.singleton){var r=p++;n=f||(f=c(e)),o=d.bind(null,n,r,!1),i=d.bind(null,n,r,!0)}else n=c(e),o=u.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"===typeof e.singleton||(e.singleton=o());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<n.length;o++){var i=s(n[o]);r[i].references--}for(var c=l(t,e),a=0;a<n.length;a++){var d=s(n[a]);0===r[d].references&&(r[d].updater(),r.splice(d,1))}n=c}}}},"./node_modules/tslib/tslib.es6.js":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}));function o(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function i(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function l(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}c((o=o.apply(t,e||[])).next())}))}Object.create;Object.create},"./src/assets/css/loader-indicator/loading.scss":function(t,e,n){var o=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/assets/css/loader-indicator/loading.scss");"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var r={insert:("body","body"),singleton:!1},s=(o(i,r),i.locals?i.locals:{});t.exports=s},"./src/assets/css/loader-indicator/spinner.scss":function(t,e,n){var o=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/assets/css/loader-indicator/spinner.scss");"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var r={insert:("body","body"),singleton:!1},s=(o(i,r),i.locals?i.locals:{});t.exports=s},"./src/assets/css/tiny-essentials.scss":function(t,e,n){var o=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=n("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/assets/css/tiny-essentials.scss");"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var r={insert:("body","body"),singleton:!1},s=(o(i,r),i.locals?i.locals:{});t.exports=s},"./src/config/config.ts":function(t,e,n){"use strict";const o={APP_VERSION:"1.8.15",BASE_API_URL:"https://sh.customily.com/api",BUTTONS_STYLES_TO_EXCLUDE:["position","font","color","width","inline-size","-webkit-text-fill-color","pointer-events","cursor"],ENGRAVER_URL:"https://cdn.customily.com/customily.js",S3_BASE_URL:"https://s3.us-west-1.amazonaws.com/customily-shopify",PREVIEW_URL:"https://sh-api.customily.com/api",PREVIEW_KEY:"26HqsWgO97oSkKW4FBDI1WuAWOE2lbg5HaKAH6fAp9bGBk1g6mY6THSakA7IoydGac0VfiDRKdOA5KIe",PREVIEW_NEW:"true"==="true".toLowerCase(),EVENTS:{APP_WILL_LOAD_PRODUCT:"customily-app-will-load",APP_WONT_LOAD_PRODUCT:"customily-app-wont-load",SHOW_MODAL_EVENT:"customily-modal-show",HIDE_MODAL_EVENT:"customily-modal-close",SHOW_PREVIEW_MODAL_EVENT:"customily-preview-modal-show",HIDE_PREVIEW_MODAL_EVENT:"customily-preview-modal-hide",OPTIONS_EXPAND_COLLAPSE_EVENT:"customily-options-toggle",OPTIONS_COLLAPSE_EVENT:"customily-options-collapse",SHARE_CUSTOMIZATION_EVENT:"customily-share-customization",LOADERS_SHOWN:"customily-loaders-shown",LOADERS_HIDDEN:"customily-loaders-hidden",SAVE_CUSTOMIZATION_EVENT:"customily-save-customization",SAVE_CUSTOMIZATION_EVENT_READY:"customily-save-customization-ready",UPDATE_CUSTOMIZATION_EVENT:"customily-update-customization",LOAD_CUSTOMIZATION_STARTED_EVENT:"customily-load-customization-started",LOAD_CUSTOMIZATION_FINISHED_EVENT:"customily-load-customization-finished",OPTIONS_LOADED_EVENT:"customily-options-loaded",OPTIONS_CHANGED_EVENT:"customily-options-changed",ITEM_PRICING_CHANGE:"customily-pricing-change",IMAGE_UPLOADED:"customily-image-uploaded",REQUIRED_ERRORS:"customily-required-error",CHECK_REQUIRED_FIELDS:"customily-check-conditions",VARIANT_STOCK:"customily-variant-stock",LIVE_PREVIEW:{SHOW_CANVAS_EVENT:"customily-live-preview-show-canvas",HIDE_CANVAS_EVENT:"customily-live-preview-hide-canvas",CANVAS_SHOWN_EVENT:"customily-live-preview-shown",CANVAS_HIDDEN_EVENT:"customily-live-preview-hidden"},PROPERTIES_GENERATED:"customily-properties-generated",VECTOR_UPLOADED:"customily-vector-uploaded"},CART_ROUTE:"/cart"};e.a=o},"./src/index.ts":function(t,e,n){"use strict";n.r(e);var o=n("./node_modules/tslib/tslib.es6.js"),i=n("./src/config/config.ts"),r=n("./src/utils/document.ts");const s=t=>new Promise((e,n)=>{const o=document.createElement("script");document.body.appendChild(o),o.onload=()=>{e()},o.onerror=()=>{n()},o.src=t});var l=n("./src/utils/timing.ts");n("./src/assets/css/tiny-essentials.scss"),n("./src/assets/css/loader-indicator/loading.scss"),n("./src/assets/css/loader-indicator/spinner.scss");var c=n("./src/utils/store/settingsStore.ts"),a=n("./src/utils/buttons/loader.ts"),d=n("./src/utils/buttons/buttons.ts"),u=n("./src/utils/optionsManager.ts");const f=()=>{const t=function(t,e){try{this.attr(t,e)}catch(n){this.prop(t,e)}return this};jQuery.fn.extend({safeAttrSet:t}),$.fn.extend({safeAttrSet:t})};var p=n("./src/utils/store/testModeStore.ts");const m=n("./node_modules/current-executing-script/dist/currentExecutingScript.js"),v=t=>{$(".cl-initial-cart-btn").removeClass("cl-initial-cart-btn"),dispatchEvent(Object(r.j)(t?i.a.EVENTS.APP_WILL_LOAD_PRODUCT:i.a.EVENTS.APP_WONT_LOAD_PRODUCT))};Object(o.a)(void 0,void 0,void 0,(function*(){var t,e,b,h,y,g,w,O;try{console.log("Customily Shopify: Version "+i.a.APP_VERSION);const a=Object(p.c)();if(a.customilyTestMode&&(console.log("Customily Shopify: test mode is active"),a.customilyDisabled))return void console.log("Customily Shopify: is disabled by customilyDisabled query parameter");const j=Date.now();yield Object(r.u)(),console.debug(`Waited ${Date.now()-j} ms for document ready`),"undefined"===typeof window.jQuery&&(console.log("Customily Shopify: no jQuery detected, loading it"),yield s("https://code.jquery.com/jquery-2.2.4.min.js")),window.$||(window.$=window.jQuery);const E=m().src,S=E.substring(0,E.lastIndexOf("/")+1);n.p=S;const C=Object(u.b)();let _=0;window.Shopify.routes&&window.Shopify.routes.root&&(_=window.Shopify.routes.root.length-1);const T=window.location.pathname.indexOf("/cart")===_;if(!C.length||T){v(!1);const t=yield Object(o.a)(void 0,void 0,void 0,(function*(){return yield Object(l.a)(()=>new Promise((t,e)=>{$.ajax({method:"GET",url:i.a.BASE_API_URL+"/settings?shop="+Object(r.r)(),success:function(e){t(e)},error:function(t,n,o){e(o)}})}))}));if(Object(c.d)(t),!t.enabled)return void console.log("Customily Shopify is disabled");if(T){console.log("Customily Shopify: handling cart");const t=yield Object(o.a)(void 0,void 0,void 0,(function*(){return yield n.e(0).then(n.bind(null,"./src/utils/cartPage.ts"))}));f(),t.init()}else console.log("Customily Shopify: not a product page, won't load")}else{const a=Object(r.n)();if(a){console.log("Customily Shopify: loading product "+a);const u=yield(O=a,Object(o.a)(void 0,void 0,void 0,(function*(){return yield Object(l.a)(()=>new Promise((t,e)=>{$.ajax({method:"GET",url:i.a.BASE_API_URL+"/settings/unified/"+O+"?shop="+Object(r.r)(),success:function(e){t(e)},error:function(t,n,o){e(o)}})}))})));if(!u.settings.enabled)return void console.log("Customily Shopify is disabled");f();const p=u.settings,m=u.productConfig;Object(c.d)(u.settings),Object(c.c)(u.productConfig);const j=Object(o.a)(void 0,void 0,void 0,(function*(){return yield n.e(2).then(n.bind(null,"./src/mainApp.ts"))}));if(Object(r.k)()?console.log("Customily Shopify: engraver already exists"):s(i.a.ENGRAVER_URL),m.assignedSets&&m.assignedSets.length||m.initial_product_id){if(!(null===(t=window.customilyShopify)||void 0===t?void 0:t.ignoreCustom)){if(p.customJs){const t=document.createElement("script");t.innerHTML=p.customJs,document.body.appendChild(t)}if(p.customCss){const t=document.createElement("style");t.innerHTML=p.customCss,document.body.appendChild(t)}}v(!0),Object(d.f)(!1);const n=Object(d.l)(null===(b=null===(e=window.customilyShopify)||void 0===e?void 0:e.buttons)||void 0===b?void 0:b.cartButtonSelector,null===(h=window.customilyShopify)||void 0===h?void 0:h.cartBtnClassesToRemove,!(null===(y=window.customilyShopify)||void 0===y?void 0:y.skipCartBtnClone)),o=Object(d.n)(null===(w=null===(g=window.customilyShopify)||void 0===g?void 0:g.buttons)||void 0===w?void 0:w.extraButtonsSelector);(yield j).init({cartButtonPromise:n,extraButtonsPromise:o,settings:p,sets:u.sets})}else console.info("Customily Shopify: not loading product"),v(!1)}else v(!1),console.error("Customily Shopify: Can't find product handle")}}catch(j){v(!1),Object(a.b)(),console.error("Customily Shopify Error: ",j)}}))},"./src/utils/buttons/buttons.ts":function(t,e,n){"use strict";n.d(e,"r",(function(){return y})),n.d(e,"q",(function(){return O})),n.d(e,"i",(function(){return j})),n.d(e,"u",(function(){return E})),n.d(e,"s",(function(){return S})),n.d(e,"j",(function(){return C})),n.d(e,"k",(function(){return _})),n.d(e,"a",(function(){return T})),n.d(e,"p",(function(){return x})),n.d(e,"o",(function(){return A})),n.d(e,"n",(function(){return N})),n.d(e,"g",(function(){return I})),n.d(e,"e",(function(){return P})),n.d(e,"l",(function(){return D})),n.d(e,"m",(function(){return R})),n.d(e,"b",(function(){return L})),n.d(e,"c",(function(){return k})),n.d(e,"d",(function(){return B})),n.d(e,"f",(function(){return V})),n.d(e,"h",(function(){return M})),n.d(e,"t",(function(){return H}));var o=n("./node_modules/tslib/tslib.es6.js"),i=n("./src/utils/optionsManager.ts"),r=n("./src/utils/buttons/loader.ts"),s=n("./src/utils/store/buttonsStore.ts"),l=n("./src/utils/document.ts"),c=n("./src/config/config.ts"),a=n("./src/utils/store/settingsStore.ts");const d=(t,e)=>{if(t.get(0)){t.val()&&t.val(e);const n=t.find("*").filter((function(){return!!$(this).text()}));if(n.length){const e=Object(l.l)(n.last().get(0));Object.keys(e).filter(t=>t.startsWith("font")).forEach(n=>{t.css(n,e[n])});const o=t.outerHeight();o&&t.css("height",o)}t.text(e)}},u=t=>{if("input"===t.prop("tagName").toLowerCase()){const e=t.val();t=t.wrapInner("<button/>").children(0).unwrap(),e&&d(t,e)}return t},f=()=>{const t=Object(a.b)();if(null===t||void 0===t?void 0:t.optionalPersonalization)return;const e=Object(i.b)();e&&e.length&&e.find('[data-shopify="payment-button"]').css("pointer-events","none")},p=t=>{const e=Object(i.b)().find("*:visible").not(t).not(t.find("*"));if(t.length){const n=t.get(0).getBoundingClientRect().top;let o=!0;e.each((t,e)=>{const i=$(e);if(Math.abs(n-i.get(0).getBoundingClientRect().top)<5)return o=!1,!1}),o&&t.css("margin-bottom",10)}},m=(t,e=!1)=>Object(l.h)(t,e,c.a.BUTTONS_STYLES_TO_EXCLUDE);var v=n("./src/utils/buttons/jQueryFilters.ts");let b=!1;const h=t=>{const e=["onclick","dpo_add2cart","data-pre-order-atc-button","data-pf-type","data-buy-button","data-product-atc","data-add-to-cart","data-cart-submit"];for(const n of e)t.removeAttr(n)},y=t=>({isDisabled:!!t.attr("disabled")&&(t.removeAttr("disabled")&&!0),ariaDisabled:!!t.attr("aria-disabled")&&(t.removeAttr("aria-disabled")&&!0),classDisabled:!!t.hasClass("disabled")&&(t.removeClass("disabled")&&!0)}),g=t=>{const e={isCartBtn:t.hasClass("hidden-cart-btn")};return e.isCartBtn?t.removeClass("hidden-cart-btn"):t.show(),e},w=(t,e)=>{e.isCartBtn?t.addClass("hidden-cart-btn"):t.hide()},O=(t,e)=>{e.isDisabled&&t.attr("disabled","true"),e.ariaDisabled&&t.attr("aria-disabled","true"),e.classDisabled&&t.addClass("disabled")},j=t=>{t.addClass("hidden-cart-btn")},E=t=>{t.removeClass("hidden-cart-btn").show()},S=(t,e)=>{var n;if(b!=t){t?console.debug("Variant NOT in stock"):console.debug("Variant in stock"),window.dispatchEvent(Object(l.j)(c.a.EVENTS.VARIANT_STOCK,{inStock:!t}));const o=Object(s.b)();for(const e of o)t?e.clonedButton.hide():e.clonedButton.show();for(const e of Object(s.c)())t?e.hide():e.show();const i=null===(n=Object(s.e)())||void 0===n?void 0:n.originalButton;i&&e&&(t?E(i):j(i)),b=t}},C=()=>b,_=t=>{if(t){const e=parseFloat(t.css("opacity")||"1");t.removeClass("hidden-cart-btn"),t.removeClass("hidden-buy-now-btn"),t.show(),e<.1&&t.css("opacity",1),t.removeAttr("disabled"),t.removeAttr("aria-disabled"),"hidden"===t.attr("visibility")&&t.css("visibility","")}},T=(t,e)=>{if(t){const n="cl-custom-"+t.substring(1),o="cl-custom-children-"+t.substring(1);if(!$("#"+n).length){const o="{background-color: "+e.backgroundColor+" !important;border-color: "+e.borderColor+" !important;border-width: "+e.borderWidth+"px !important;border-style: solid !important;border-radius: "+e.borderRadius+"px !important;font-size: "+e.fontSize+"px !important;color: "+e.fontColor+" !important;-webkit-text-fill-color: "+e.fontColor+" !important;}";Object(l.d)(t+o,n)}$("#"+o).length||Object(l.d)(t+" * { font-size: "+e.fontSize+"px !important; }",o)}},x=t=>Object(o.a)(void 0,void 0,void 0,(function*(){return new Promise((e,n)=>{let o=0;const i=setInterval((function(){try{o+=50;const n=$(t||'.shopify-payment-button [data-testid="GooglePay-button"],[data-testid="PayPalInContext-button"],[data-testid="ApplePay-button"],[data-testid="ShopifyPay-button"]').filter(":visible").filter(v.b);if(n.length){clearInterval(i);const t=[];f(),n.each((function(e,n){const o=$(n),i=!!o.attr("disabled");i&&o.removeAttr("disabled");const s=Object(l.l)(n),c=o.clone().addClass("cloned-payment-btn").css(s).css("pointer-events","all");c.safeAttrSet("type","button"),c.insertAfter(o),Object(r.a)(c),_(c),o.css("cssText","display: none !important"),i&&o.attr("disabled","true");const a={originalButton:o,clonedButton:c};t.push(a)})),Object(s.n)(t),e(t)}else o>3e4&&(clearInterval(i),e(void 0))}catch(c){clearInterval(i),n(c)}}),50)})})),A=t=>Object(o.a)(void 0,void 0,void 0,(function*(){return new Promise((e,n)=>{let o=0;const i=setInterval((function(){try{o+=50;const n=$(t||".shopify-payment-button .shopify-payment-button__more-options").filter(":visible").filter(v.b);if(n.length){let t;if(clearInterval(i),f(),n.length){const e=!!n.attr("disabled");e&&n.removeAttr("disabled");const o=Object(l.l)(n.get(0)),i=n.clone().addClass("cloned-more-payments-btn");i.insertAfter(n),i.css(o).css("pointer-events","all"),_(i),n.css("cssText","display: none !important"),Object(r.a)(i),e&&n.attr("disabled","true"),t={originalButton:n,clonedButton:i}}Object(s.m)(t),e(t)}else o>3e4&&(clearInterval(i),e(void 0))}catch(c){clearInterval(i),n(c)}}),50)})})),N=t=>Object(o.a)(void 0,void 0,void 0,(function*(){return new Promise((e,n)=>{let o=0;if(!t)return void e([]);const i=setInterval((function(){try{o+=50;const n=$(t);if(n.length){clearInterval(i);const t=[];n.each((function(e,n){const o=$(n),i=Object(l.l)(n),c=$(n).clone().addClass("cloned-extra-btn").addClass("index-"+e);c.safeAttrSet("type","button"),c.insertAfter(o),c.css(i),Object(r.a)(c),_(c),o.css("cssText","display: none !important");const a={originalButton:o,clonedButton:c};Object(s.a)(a),t.push(a)})),e(t)}else o>3e4&&(clearInterval(i),e([]))}catch(c){clearInterval(i),n(c)}}),50)})})),I=(t,e)=>{const n=e||Object(i.b)();if(n&&n.length){const e='[type*="submit"], [data-product-submit], .product-smart-wrapper .add-to-cart-btn, .customily-add-to-cart-btn, .button--add-to-cart, #AddToCart';let o=n.find(t||e).filter(":visible").filter(v.b).first();return o.length||(o=n.find(t||'[name="add"]').filter(":visible").filter(v.b).first()),o.length||(o=n.find(t||e).first()),o.length||(o=n.find("button,.btn").filter((function(){return $(this).text().trim().toLowerCase().indexOf("add to cart")>-1}))),o.length||(o=n.find("button[value],.btn[value]").filter((function(){return"add to cart"===($(this).attr("value")||"").trim().toLowerCase()}))),o.length||(o=n.find('button[data-original-text="Add to cart"],button[data-buy-button]').filter(":visible").filter(v.b).first()),o}},P=t=>{let e=m(t,!0).safeAttrSet("type","button").removeClass("ajax-submit");var n;return e=u(e),e.removeClass("hidden-cart-btn").css("display","block").attr("id","customily-cart-btn"),h(e),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(["flex","-webkit-flex"].includes((n=e).css("display")||"")&&(n.css("place-items",""),n.css("align-items","center"),n.css("-webkit-align-items","center"),n.css("display","-webkit-flex"),n.css("display","flex"))),e},D=(t,e,n=!0)=>Object(o.a)(void 0,void 0,void 0,(function*(){var o,l;const c=Object(a.b)(),d=Object(i.b)();if(d&&d.length){let i=I(t);if(!i||!i.length)return void console.error("Couldn't find cart button");i.length>1&&console.warn("Found more than 1 cart button");if("submit"===(i.attr("type")||"").toLowerCase())if(n){if(!(null===(l=null===(o=window.customilyShopify)||void 0===o?void 0:o.buttons)||void 0===l?void 0:l.dontRemoveOriginalButton)){const t=i.clone();t.insertAfter(i),i.remove(),i=t}}else console.warn("Not cloning cart button");const a=P(i);e&&e.length&&a.removeClass(e.join(" ")),Object(r.a)(a),j(i),a.insertBefore(i),_(a);const d={clonedButton:a,originalButton:i};return Object(s.l)(d),(null===c||void 0===c?void 0:c.buttonsStyles.addToCart.customize)&&T("#customily-cart-btn",null===c||void 0===c?void 0:c.buttonsStyles.addToCart.styles),d}console.error("Couldn't find product form")})),R=t=>Object(o.a)(void 0,void 0,void 0,(function*(){return new Promise((e,n)=>{let o=0;if(Object(i.b)().length){const c=setInterval((function(){try{o+=50;const n=(t=>{const e=Object(i.b)();if(e&&e.length){return e.find(t||".shopify-payment-button__button--unbranded,.customily-buy-now-btn,.button-buy-now").filter(":visible").filter(v.b)}})(t);if(n&&n.length){clearInterval(c),n.length>1&&console.warn("Found more than 1 cart button"),f();const t=((t,e=!0)=>{const n=y(t);let o;e&&(o=Object(l.l)(t.get(0)));const i=t.clone().safeAttrSet("type","button").removeClass("ajax-submit");return i.removeClass("hidden-buy-now-btn").removeClass("shopify-payment-button__button").css("display","block").attr("id","customily-buy-now-btn"),e&&o&&i.css(o),h(i),O(t,n),i})(n);t.css("pointer-events","all"),n.addClass("hidden-buy-now-btn"),Object(r.a)(t),t.insertBefore(n),_(t);const o={originalButton:n,clonedButton:t};Object(s.k)(o),e(o)}o>3e4&&(clearInterval(c),e(void 0))}catch(a){clearInterval(c),n(a)}}),50)}else n("Couldn't find product form")})})),L=(t,e)=>{const n=Object(a.b)();e||(e=(null===n||void 0===n?void 0:n.personalizeButtonText)||"Personalize");const o=y(t),i=g(t),s=Object(l.l)(t.get(0));let c=m(t);return c=u(c),c.get(0).className="",c.removeAttr("id").removeAttr("name").safeAttrSet("type","button").addClass("customily-personalize-button").css(s).css("pointer-events","").css("margin","").css("cursor","pointer").show(),h(c),O(t,o),w(t,i),c.insertAfter(t),d(c,e),Object(r.a)(c),p(c),(null===n||void 0===n?void 0:n.buttonsStyles.personalize.customize)&&T(".customily-personalize-button",null===n||void 0===n?void 0:n.buttonsStyles.personalize.styles),c},k=(t,e,n)=>{const o=Object(a.b)();n||(n=(null===o||void 0===o?void 0:o.previewButtonText)||"Preview");const i=y(t),s=g(t),c=Object(l.l)(t.get(0));let f=m(t);return f=u(f),f.get(0).className="",f.removeAttr("id").removeAttr("name").safeAttrSet("type","button").addClass("customily-preview-button").css(c).css("pointer-events","").css("margin","").css("cursor","pointer").show(),h(f),O(t,i),w(t,s),f.insertBefore(e||t),d(f,n),Object(r.a)(f),p(f),(null===o||void 0===o?void 0:o.buttonsStyles.preview.customize)&&T(".customily-preview-button",null===o||void 0===o?void 0:o.buttonsStyles.preview.styles),f},B=(t,e="Share Customization",n)=>{const o=Object(a.b)(),i=y(t),s=g(t),c=Object(l.l)(t.get(0));let f=m(t);return f=u(f),f.get(0).className="",f.removeAttr("id").removeAttr("name").safeAttrSet("type","button").addClass("customily-share-customization-button").css(c).css("pointer-events","").css("margin","").css("cursor","pointer").show(),h(f),n&&f.addClass(n),O(t,i),f.insertAfter(t),w(t,s),d(f,e),Object(r.a)(f),p(f),(null===o||void 0===o?void 0:o.buttonsStyles.share.customize)&&T(".customily-share-customization-button",null===o||void 0===o?void 0:o.buttonsStyles.share.styles),f},V=(t=!0)=>{var e;const n=Object(i.b)();n&&(null===(e=n.find(".shopify-payment-button"))||void 0===e||e.css("display",t?"block":"none"))},M=()=>{const t=Object(s.e)();null===t||void 0===t||t.originalButton.hide();const e=Object(s.d)();null===e||void 0===e||e.originalButton.hide();const n=Object(s.f)();null===n||void 0===n||n.originalButton.hide();const o=Object(s.g)();if(o)for(const i of o)i.originalButton.hide();V(!1)},H=()=>{const t=Object(s.e)();null===t||void 0===t||t.originalButton.show();const e=Object(s.d)();null===e||void 0===e||e.originalButton.show();const n=Object(s.f)();null===n||void 0===n||n.originalButton.show();const o=Object(s.g)();if(o)for(const i of o)i.originalButton.show();V()}},"./src/utils/buttons/jQueryFilters.ts":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r}));const o=function(t,e=!1){return"hidden"!==t.css("visibility")&&"none"!==t.css("display")&&(!!e||"0"!=t.css("opacity"))&&t.is(":visible")},i=function(){return o($(this))},r=function(){return o($(this),!0)}},"./src/utils/buttons/loader.ts":function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return u}));var o=n("./src/config/config.ts"),i=n("./src/utils/document.ts"),r=n("./src/utils/store/buttonsStore.ts");let s=!0;const l=t=>{if(t){t.find("div.ld.ld-cycle.ld-ring").remove();const e=$("<div>").removeClass("ld").removeClass("ld-cycle").removeClass("ld-ring").addClass("ld").addClass("ld-cycle").addClass("ld-ring");t.removeClass("ld-over-inverse").removeClass("running").addClass("ld-over-inverse"),s&&t.addClass("running"),e.prependTo(t)}},c=t=>{null===t||void 0===t||t.removeClass("running")},a=t=>{c(t),null===t||void 0===t||t.addClass("running")},d=t=>{var e,n;if(s=!0,t&&t.length){a(t);const o=Object(r.b)();for(const t of o)t.clonedButton.addClass("disable-pointer-events");for(const t of Object(r.c)())t.addClass("disable-pointer-events");null===(e=Object(r.i)())||void 0===e||e.addClass("disable-pointer-events"),null===(n=Object(r.h)())||void 0===n||n.addClass("disable-pointer-events")}else{const t=Object(r.b)();for(const e of t)a(e.clonedButton);for(const e of Object(r.c)())a(e);a(Object(r.i)()),a(Object(r.h)())}window.dispatchEvent(Object(i.j)(o.a.EVENTS.LOADERS_SHOWN))},u=()=>{var t,e;s=!1;const n=Object(r.b)();for(const o of n)c(o.clonedButton),o.clonedButton.removeClass("disable-pointer-events");for(const o of Object(r.c)())c(o),o.removeClass("disable-pointer-events");c(Object(r.i)()),null===(t=Object(r.i)())||void 0===t||t.removeClass("disable-pointer-events"),c(Object(r.h)()),null===(e=Object(r.h)())||void 0===e||e.removeClass("disable-pointer-events"),window.dispatchEvent(Object(i.j)(o.a.EVENTS.LOADERS_HIDDEN))}},"./src/utils/document.ts":function(t,e,n){"use strict";n.d(e,"q",(function(){return c})),n.d(e,"s",(function(){return a})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return f})),n.d(e,"u",(function(){return p})),n.d(e,"n",(function(){return m})),n.d(e,"r",(function(){return v})),n.d(e,"j",(function(){return b})),n.d(e,"a",(function(){return h})),n.d(e,"f",(function(){return y})),n.d(e,"l",(function(){return g})),n.d(e,"h",(function(){return w})),n.d(e,"e",(function(){return O})),n.d(e,"g",(function(){return j})),n.d(e,"t",(function(){return E})),n.d(e,"k",(function(){return S})),n.d(e,"i",(function(){return C})),n.d(e,"o",(function(){return _})),n.d(e,"p",(function(){return T})),n.d(e,"m",(function(){return x}));var o=n("./node_modules/tslib/tslib.es6.js"),i=n("./src/config/config.ts"),r=n("./src/utils/store/setsStore.ts");let s=null,l=!1;const c=(t,e)=>{e||(e=window.location.href),t=t.replace(/[[\]]/g,"\\$&");const n=new RegExp(`[?&]${t}(=([^&#]*)|&|#|$)`).exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},a=()=>{window.location.href=i.a.CART_ROUTE},d=(t,e=!1)=>{const n=document.createElement("script");n.innerHTML=t,n.async=e,document.body.appendChild(n)},u=(t,e)=>{const n=document.createElement("style");n.setAttribute("id",e),n.innerHTML=t,document.head.appendChild(n)},f=t=>{const e=document.createElement("link");e.rel="dns-prefetch",e.href=t,document.head.appendChild(e);const n=document.createElement("link");n.rel="preconnect",n.href=t,n.crossOrigin="",document.head.appendChild(n);const o=document.createElement("link");o.rel="prefetch",o.href=t,document.head.appendChild(o)},p=(t=3e4)=>Object(o.a)(void 0,void 0,void 0,(function*(){return new Promise((e,n)=>{const o=/loaded|complete/;let i=0;if(o.test(document.readyState))e();else{const r=setInterval((function(){o.test(document.readyState)?(clearInterval(r),e()):(i+=50,i>t&&(clearInterval(r),n("Document ready timeout!")))}),50);window.addEventListener("DOMContentLoaded",()=>{clearInterval(r),e()})}})})),m=t=>{var e,n;if(null===(e=window.customilyShopify)||void 0===e?void 0:e.productHandleIsSetMannualy){const t=window.customilyShopify.productHandle||void 0;if(t)return s=t,t}if(s&&!t)return s;{let t=window.location.href.split("/"),e=t[t.length-1];if(e=e.split("?")[0],"products_preview"===e&&(console.log("Product preview mode"),e=null),e)e.indexOf("#")>-1&&(e=e.substring(0,e.indexOf("#")));else if(e=null===(n=$('link[rel="canonical"]').first().get(0))||void 0===n?void 0:n.href,e)t=e.split("/"),e=t[t.length-1],e=e.split("?")[0],e.indexOf("#")>-1&&(e=e.substring(0,e.indexOf("#")));else{const n=document.getElementsByTagName("div");let i;for(let t=0;t<n.length;t++)"Product"===n[t].getAttribute("data-label")&&(i=n[t]);if(i&&(t=i.getElementsByTagName("a")[0].href.split("/")),t&&(e=t[t.length-1],e=null===e||void 0===e?void 0:e.split("?")[0],e&&0==e.length))try{e=document.getElementsByClassName("product_name")[0].children[0].getAttribute("href"),e&&(e=e.substring(e.lastIndexOf("/")+1,e.length))}catch(o){console.log(o)}}if(!e){let t=null;const n=$('script[type="application/json"]');for(let e=0;e<n.length;e++){const o=n[e];o.id&&o.id.startsWith("ProductJson-")&&(t=o);const i=o.attributes;for(let e=0;e<i.length;e++){if(i[e].name.startsWith("data-product-json")){t=o;break}}}try{if(t){const n=JSON.parse(t.innerHTML);n.handle&&(e=n.handle)}}catch(i){}}return e||console.error("Error getting product handle"),s=e,e}},v=()=>window.Shopify.shop,b=(t,e)=>{let n;return"function"===typeof CustomEvent?n=new CustomEvent(t,{detail:e}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!1,!1,e)),n},h=()=>Object(o.a)(void 0,void 0,void 0,(function*(){const t=document.createElement("style");t.innerHTML=".loadingoverlay { display: none !important; }",document.body.appendChild(t)})),y=(t,e,n,o=!1)=>{let i=n.getWidth()/n.getHeight();if(isNaN(i)&&(i=1),!o){const t=$(".canvas-wrapper .customily-mobile-controls");t.is(":visible")&&(e-=t.height()||0)}let r=e*i;return t>0&&r>t&&(r=t),r>0?r:0},g=(t,e=["position","font"])=>{if(!t)return{};const n={};if(window.getComputedStyle){const o=(t,e)=>e.toUpperCase(),i=window.getComputedStyle(t,null);for(let t=0;t<i.length;t++){const r=i[t];if(e&&e.indexOf(r)>-1)continue;const s=r.replace(/-([a-z])/g,o),l=i.getPropertyValue(r);n[s]=l}return n}if(t.currentStyle){const o=t.currentStyle;for(const t in o)t&&e.indexOf(t)>-1||(n[t]=o[t]);return n}return n},w=(t,e=!1,n)=>{const o=t.clone();o.off();const i=o.find("*"),r=t.find("*"),s=[],l=(n||[]).filter(t=>"position"!==t);if(r.each((t,e)=>{const n=g(e,l);s.push({index:t,styles:n})}),!e){const e=g(t.get(0),n);o.css(e)}return i.each((t,e)=>{const n=s.find(e=>e.index===t);n&&$(e).css(n.styles)}),o},O=(t,e,n)=>{const o=t.get(0),i=e.get(0);if(o&&i){const t=g(o,n);e.css(t)}},j=()=>new Promise(t=>{const e=b(i.a.EVENTS.CHECK_REQUIRED_FIELDS);window.dispatchEvent(e),setTimeout(()=>{const e=Object(r.b)();t(e)},200)}),E=(t,e=!1)=>{var n,o;if(e)null===(n=t.parentNode)||void 0===n||n.replaceChild(t.cloneNode(!0),t);else{const e=t.cloneNode(!1);for(;t.hasChildNodes();)e.appendChild(t.firstChild);null===(o=t.parentNode)||void 0===o||o.replaceChild(e,t)}},S=()=>!(!$("script").filter((function(){const t=$(this).attr("src");return!!t&&t.indexOf("customily.js")>-1})).length&&!window.engraver),C=()=>{l||(l=!0,window.addEventListener(i.a.EVENTS.LOADERS_SHOWN,()=>{$("#cl_optionsapp *").addClass("disable-pointer-events")}),window.addEventListener(i.a.EVENTS.LOADERS_HIDDEN,()=>{$("#cl_optionsapp *").removeClass("disable-pointer-events")}))},_=()=>{var t;return(null===(t=null===window||void 0===window?void 0:window.meta)||void 0===t?void 0:t.product)?window.meta.product.id:-1},T=()=>{var t,e,n;return(null===(n=null===(e=null===(t=null===window||void 0===window?void 0:window.meta)||void 0===t?void 0:t.product)||void 0===e?void 0:e.variants)||void 0===n?void 0:n.length)>0?window.meta.product.variants[0].id:-1},x=t=>{var e;return null===(e=document.cookie.split("; ").find(e=>e.startsWith(t+"=")))||void 0===e?void 0:e.split("=")[1]}},"./src/utils/optionsManager.ts":function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return l}));var o=n("./src/utils/buttons/buttons.ts");let i,r;const s=()=>{var t,e;let n=$("form.customily-product-form:visible");if(n.length||(n=$("form.beae-product-form:visible").filter((t,e)=>{var n,i,r;return!!(null===(r=Object(o.g)(null===(i=null===(n=window.customilyShopify)||void 0===n?void 0:n.buttons)||void 0===i?void 0:i.cartButtonSelector,$(e)))||void 0===r?void 0:r.length)})),n.length||(n=$("form[action*='/cart/add']:visible").filter((function(){return($(this).height()||0)>0}))),n.length>3){const t=n.filter("[data-product-id]").first();n=t.length?t:n.first()}else n.length>1&&(n=n.filter((function(){return!($(this).attr("id")||"").startsWith("product-form-installment")}))),n=n.first();n.length||(n=$("form[data-product-form],form#add-to-cart").filter((function(){return($(this).height()||0)>0})).first()),n.length||(n=$("#product-form").first());const i=Object(o.g)(null===(e=null===(t=window.customilyShopify)||void 0===t?void 0:t.buttons)||void 0===e?void 0:e.cartButtonSelector,n);if(n.length&&!(null===i||void 0===i?void 0:i.length)){const t=$("#AddToCartForm").first();t.length&&(n=t)}return n.length||(n=$("#AddToCartForm").first()),n.length||(n=$("form[data-productid]").first()),n.length||(n=$("form.shopify-product-form").first()),n.length||(n=$("form[action*='/cart/add']:visible").filter((function(){return($(this).attr("id")||"").startsWith("product_form_")}))),n},l=t=>{var e;const n=t.parentElement||s();let o=$('div[id="customily-options"]');if(o.length||(o=$("<div>").attr("id","customily-options"),r=$("<div>").addClass("lds-dual-ring").css("display","none"),o.append(r)),"undefined"!==typeof(null===(e=window.customilyShopify)||void 0===e?void 0:e.optionsBeforeVariantSelector)&&(t.beforeVariants=window.customilyShopify.optionsBeforeVariantSelector),!(n.length>0))throw new Error("Couldn't find container to inject Customily Options");{const e=t.variantsContainersSelector?$(t.variantsContainersSelector):(t=>{const e=t.find("div.selector-wrapper,div.swatch_options,fieldset.swatch-wrapper,div.radio-wrapper,.product-form__variants,div.variant-wrapper");return e.length>0?e:null})(n);if(e&&e.length)if(t.beforeVariants){const t=e.first();o.insertBefore(t)}else{const t=e.last();o.insertAfter(t)}else console.warn("Variants element not found"),n.prepend(o)}return i=o,o}},"./src/utils/store/buttonsStore.ts":function(t,e,n){"use strict";let o,i,r,s,l,c,a;n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return v})),n.d(e,"n",(function(){return b})),n.d(e,"m",(function(){return h})),n.d(e,"g",(function(){return y})),n.d(e,"f",(function(){return g})),n.d(e,"l",(function(){return w})),n.d(e,"e",(function(){return O})),n.d(e,"k",(function(){return j})),n.d(e,"d",(function(){return E})),n.d(e,"o",(function(){return S})),n.d(e,"h",(function(){return C})),n.d(e,"p",(function(){return _})),n.d(e,"i",(function(){return T})),n.d(e,"q",(function(){return x})),n.d(e,"j",(function(){return A}));const d=[],u=[],f=t=>{d.push(t)},p=t=>{t&&u.push(t)},m=()=>d,v=()=>u,b=t=>{if(t){l=t;for(const e of t)f(e)}},h=t=>{t&&(c=t,f(t))},y=()=>l,g=()=>c,w=t=>{t&&(d.push(t),o=t)},O=()=>o,j=t=>{t&&(d.push(t),i=t)},E=()=>i,S=t=>{p(t),r=t},C=()=>r,_=t=>{p(t),s=t},T=()=>s,x=t=>{p(t),a=t},A=()=>a},"./src/utils/store/setsStore.ts":function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return c}));let o=[],i=!1;const r=t=>{o=t},s=()=>o,l=t=>{i=t},c=()=>i},"./src/utils/store/settingsStore.ts":function(t,e,n){"use strict";let o,i;n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return c}));const r=t=>{o=t},s=()=>o,l=t=>{i=t},c=()=>i},"./src/utils/store/testModeStore.ts":function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return a}));var o=n("./src/utils/document.ts");let i=null,r=null,s=null;const l=()=>i,c=()=>s,a=()=>(i=Object(o.q)("customilyTestMode"),r=Object(o.q)("customilyDisabled"),s=Object(o.q)("enableStoredPersonalization"),{customilyTestMode:i,customilyDisabled:r,enableStoredPersonalization:s})},"./src/utils/timing.ts":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var o=n("./node_modules/tslib/tslib.es6.js");const i=(t,e)=>Object(o.a)(void 0,void 0,void 0,(function*(){return new Promise((n,o)=>{let i=0;const r=setInterval(()=>{"undefined"!==typeof window[t]?(clearInterval(r),n()):(i+=50,i>e&&(clearInterval(r),o()))},50)})})),r=t=>Object(o.a)(void 0,void 0,void 0,(function*(){return new Promise(e=>{setTimeout(e,t)})})),s=(t,e=3,n=200)=>Object(o.a)(void 0,void 0,void 0,(function*(){return new Promise((i,s)=>Object(o.a)(void 0,void 0,void 0,(function*(){let o=0;for(;;)try{return void i(yield t())}catch(l){if(o>=e)return void s(l);++o,yield r(n)}})))}))}})}));